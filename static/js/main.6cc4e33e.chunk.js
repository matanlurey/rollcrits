(this.webpackJsonprollcrits=this.webpackJsonprollcrits||[]).push([[0],{283:function(e,t,a){e.exports=a(492)},288:function(e,t,a){},289:function(e,t,a){},492:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),i=a.n(o),l=(a(288),a(83)),c=a(131),s=a(132),u=a(151),m=a(147),d=a(501),h=a(505),f=a(504),p=a(507),v=a(502);a(289);function b(e){return btoa(JSON.stringify(e))}var E=a(516),g=a(517),k=a(519),C=a(520),S=a(521),y=a(511);function x(e){return r.a.createElement(f.a.Item,{label:e.label},r.a.createElement(y.a,{value:e.count,min:0,onChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e.onChange(Number.isInteger(t)?t:e.count)}}))}var O,w=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.dice;return r.a.createElement(f.a,{labelCol:{xs:{span:24},sm:{span:8}}},r.a.createElement(x,{label:"Red",count:t.red,onChange:function(t){return e.updateDice({red:t})}}),r.a.createElement(x,{label:"Black",count:t.black,onChange:function(t){return e.updateDice({black:t})}}),r.a.createElement(x,{label:"White",count:t.white,onChange:function(t){return e.updateDice({white:t})}}))}},{key:"updateDice",value:function(e){this.props.onChanged(Object(l.a)({},this.props.dice,{},e))}}]),a}(r.a.Component),I=a(149),j=a(510),W=a(509),M=a(513),R=a(110),D=a(503),T=[{name:"B1 Battle Droid",toWound:5/6,armor:!1},{name:"B2 Battle Droid",toWound:5/6,armor:1},{name:"Rebel Trooper",toWound:4/6,armor:!1},{name:"Stormtrooper",toWound:.5,armor:!1},{name:"Deathtrooper",toWound:2/6,armor:!1},{name:"Rebel AT-RT",toWound:5/6,armor:!0},{name:"X-34 Landpseeder",toWound:4/6,armor:2},{name:"T-47 Airspeeder",toWound:4/6,armor:!0},{name:"Dewback Rider",toWound:.5,armor:1},{name:"Occupier Tank",toWound:.5,armor:!0}],N=function(e){var t,a=R.mean(e.data.map((function(e){return e.netHits}))),n=R.mean(e.data.map((function(e){return e.netCrits}))),o=[],i=Object(I.a)(T);try{for(i.s();!(t=i.n()).done;){var l=t.value,c=a,s=n;l.armor&&(c=!0===l.armor?Math.max(0,e.mods.impact):Math.max(e.mods.impact,c-l.armor));var u=c+s,m=Math.max(0,u-0)*l.toWound,d=Math.max(0,u-1)*l.toWound,h=Math.max(0,u-2)*l.toWound;o.push({key:l.name,name:l.name,cover0:m.toFixed(1),cover1:d.toFixed(1),cover2:h.toFixed(1)})}}catch(f){i.e(f)}finally{i.f()}return r.a.createElement(D.a,{bordered:!0,columns:[{title:"Defending",key:"name",dataIndex:"name"},{title:"No Cover",key:"cover0",dataIndex:"cover0"},{title:"Cover 1",key:"cover1",dataIndex:"cover1"},{title:"Cover 2",key:"cover2",dataIndex:"cover2"}],dataSource:o,pagination:!1,size:"small"})},H=a(265);!function(e){e[e.blank=0]="blank",e[e.surge=1]="surge",e[e.hit=2]="hit",e[e.crit=3]="crit"}(O||(O={}));var F={white:[O.crit,O.surge,O.hit,O.blank,O.blank,O.blank,O.blank,O.blank],black:[O.crit,O.surge,O.hit,O.hit,O.hit,O.blank,O.blank,O.blank],red:[O.crit,O.surge,O.hit,O.hit,O.hit,O.hit,O.hit,O.blank]};var P=function(e){var t,a=function(e){for(var t=[],a=new H.a(e.useRandomSeed?void 0:"1734176512"),n=0;n<e.iterations;n++){for(var r=[],o=0;o<e.attackPool.red;o++)r.push(a.nextArrayItem(F.red));for(var i=0;i<e.attackPool.black;i++)r.push(a.nextArrayItem(F.black));for(var l=0;l<e.attackPool.white;l++)r.push(a.nextArrayItem(F.white));for(var c=0,s=0,u=0,m=r;u<m.length;u++){var d=m[u];d===O.crit?s++:d===O.hit?c++:d===O.surge&&("crit"===e.attackModifiers.surge?s++:"hit"===e.attackModifiers.surge&&c++)}t.push({impact:e.attackModifiers.impact,netHits:c,netCrits:s})}return t}(e.simulate),n={},o=new Set,i=Object(I.a)(a);try{for(i.s();!(t=i.n()).done;){var l=t.value,c=l.netCrits+l.netHits;n[c]=(n[c]||0)+1,o.add(c)}}catch(s){i.e(s)}finally{i.f()}return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{animate:{duration:1e3},domainPadding:{x:15},height:200},r.a.createElement(W.a,{data:Object.entries(n).map((function(e){return{x:e[0],y:e[1]}})),labels:function(e){var t=e.datum;return"".concat((t.y/a.length*100).toFixed(0),"%")},style:{data:{fill:"tomato"}}}),r.a.createElement(M.a,{label:"\u03bc Hits: ".concat(R.mean(a.map((function(e){return e.netHits+e.netCrits}))).toFixed(1)),style:{axisLabel:{padding:30}}})),r.a.createElement(N,{data:a,mods:{impact:e.simulate.attackModifiers.impact}}))},B=a(114),J=B.a.Option,A=function(e){return r.a.createElement(f.a,{labelCol:{xs:{span:24},sm:{span:8}}},r.a.createElement(f.a.Item,{label:"Surge"},r.a.createElement(B.a,{value:e.modifiers.surge,onChange:function(t){e.onChanged(Object(l.a)({},e.modifiers,{surge:t}))}},r.a.createElement(J,{value:"none"},"None"),r.a.createElement(J,{value:"hit"},"Hit"),r.a.createElement(J,{value:"crit"},"Crit"))),r.a.createElement(f.a.Item,{label:"Impact"},r.a.createElement(y.a,{value:e.modifiers.impact,min:0,onChange:function(t){e.onChanged(Object(l.a)({},e.modifiers,{impact:0===t?0:t||e.modifiers.impact}))}})))},L=d.a.Sider,z=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(c.a)(this,a),n=t.call(this,e);var r=JSON.parse(JSON.stringify(a.defaultState));return n.state=Object(l.a)({},r,{},function(e){var t=window.location.hash;if(t){var a=t.indexOf("#");if(-1!==a&&(t=t.substring(a+1)),t&&t.length)return JSON.parse(atob(t))}}(window.location.hash)),n}return Object(s.a)(a,[{key:"encodeStateIfChanged",value:function(){var e=b(this.state);e===a.defaultEncodedState?window.location.hash="":window.location.hash=e}},{key:"iterationsToSlider",value:function(e){return e.toString().length-1}},{key:"slideToIterations",value:function(e){switch(e){case 1:return 10;case 2:return 100;case 3:return 1e3;case 4:return 1e4;case 5:return 1e5;default:return a.defaultState.iterations}}},{key:"render",value:function(){var e=this;return this.encodeStateIfChanged(),r.a.createElement(d.a,{style:{height:"100vh"}},r.a.createElement(L,{breakpoint:"lg",collapsedWidth:"0",width:"250px"},r.a.createElement("div",{className:"logo"},r.a.createElement("strong",null,"RollCrits")," #",a.shortHash),r.a.createElement(h.a,{title:r.a.createElement("span",null,r.a.createElement(E.a,null),r.a.createElement("span",null," Settings"))},r.a.createElement(f.a,{layout:"vertical"},r.a.createElement(f.a.Item,{label:"Iterations"},r.a.createElement(p.a,{min:1,max:5,marks:{1:"10",3:"1000",5:"100000"},value:this.iterationsToSlider(this.state.iterations),tipFormatter:this.slideToIterations.bind(this),onChange:function(t){return e.setState({iterations:e.slideToIterations(t)})}})),r.a.createElement(f.a.Item,{label:"Random Seed"},r.a.createElement(v.a,{checkedChildren:r.a.createElement(g.a,null),unCheckedChildren:r.a.createElement(k.a,null),checked:this.state.useRandomSeed,onChange:function(t){return e.setState({useRandomSeed:!!t})}})))),r.a.createElement(h.a,{title:r.a.createElement("span",null,r.a.createElement(C.a,null),r.a.createElement("span",null," Dice"))},r.a.createElement(w,{dice:this.state.attackPool,onChanged:function(t){e.setState({attackPool:t})}})),r.a.createElement(h.a,{title:r.a.createElement("span",null,r.a.createElement(S.a,null),r.a.createElement("span",null," Modifiers"))},r.a.createElement(A,{modifiers:this.state.attackModifiers,onChanged:function(t){e.setState({attackModifiers:t})}}))),r.a.createElement(d.a,null,r.a.createElement(d.a.Content,{style:{margin:"24px 16px 0"}},r.a.createElement("div",{className:"content-module"},r.a.createElement(P,{simulate:this.state})))))}}]),a}(r.a.Component);z.defaultState={attackPool:{red:1,black:1,white:1},attackModifiers:{impact:0,surge:"none"},iterations:1e4,useRandomSeed:!0},z.defaultEncodedState=b(z.defaultState),z.shortHash="de693db";var X=z;i.a.render(r.a.createElement(X,null),document.getElementById("root"))}},[[283,1,2]]]);
//# sourceMappingURL=main.6cc4e33e.chunk.js.map